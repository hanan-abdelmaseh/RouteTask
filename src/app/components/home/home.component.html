
<div class="container">
  <div class="row mt-5">
    <div class="col-md-12">

      <mat-form-field appearance="outline" class="w-50 me-5">
        <button mat-icon-button matPrefix>
          <mat-icon>search</mat-icon>
        </button>
        <mat-label>Search By Name</mat-label>
        <input
          matInput
          type="text"
          placeholder="Search"
          #searchValue
          [(ngModel)]="search"
          (keyup.enter)="filtetByName(searchValue)"
          (keydown.backspace)="resetSearchInput()" />
        <button
          *ngIf="search"
          matSuffix
          mat-icon-button
          aria-label="Clear"
          (click)="resetSearchInput()">
          <mat-icon>close</mat-icon>
        </button>
      </mat-form-field>

      <!--filter by transaction-->
      <mat-form-field appearance="outline" class="w-25">
        <button mat-icon-button matPrefix>
          <mat-icon>search</mat-icon>
        </button>
        <mat-label>Search By amount</mat-label>
        <input
          matInput
          type="number"
          placeholder="Search"
          #searchValue
          [(ngModel)]="searchNumber"
          (keyup.enter)="filtetByamount(searchNumber)"
          (keydown.backspace)="resetAmountSearch()" />
        <button
          *ngIf="search"
          matSuffix
          mat-icon-button
          aria-label="Clear"
          (click)="resetAmountSearch()">
          <mat-icon>close</mat-icon>
        </button>
      </mat-form-field>
    </div>
  </div>
  <div class="row mt-2">
    <div class="col-md-12">
      <!--no data-->
      <ng-container  *ngIf="customersList.length == 0">
        <table mat-table [dataSource]="customersList" class="mat-elevation-z8">

          <!--- Note that these columns can be defined in any order.
                        The actual rendered columns are set as a property on the row definition" -->
  
          <!-- name  Column -->
          <ng-container matColumnDef="Name">
            <th mat-header-cell *matHeaderCellDef> Name</th>
          </ng-container>
          <!--transactions -->
          <ng-container matColumnDef="Transaction">
            <th mat-header-cell *matHeaderCellDef> Transactions</th>
  
           
  
          </ng-container>
          <ng-container matColumnDef="Chart">
            <th mat-header-cell *matHeaderCellDef> Chart</th>
          </ng-container>
  
          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
      <app-not-found></app-not-found>
      </ng-container>
      <ng-container  *ngIf="customersList.length > 0">
      <table mat-table [dataSource]="customersList" class="mat-elevation-z8">

        <!--- Note that these columns can be defined in any order.
                      The actual rendered columns are set as a property on the row definition" -->

        <!-- name  Column -->
        <ng-container matColumnDef="Name">
          <th mat-header-cell *matHeaderCellDef> Name</th>
          <td mat-cell *matCellDef="let element"> {{element.name}} </td>
        </ng-container>
        <!--transactions -->
        <ng-container matColumnDef="Transaction">
          <th mat-header-cell *matHeaderCellDef> Transactions</th>
          <td mat-cell *matCellDef="let element" >
            <ng-container *ngIf="transactionList.length >0">
            <ng-container *ngFor="let transaction of transactionList">
              <span *ngIf="transaction.customer_id === element.id" class="me-4">
                {{transaction.amount}}
              </span>
            </ng-container>
          </ng-container>

          </td>

 
</ng-container>
         

     
        <ng-container matColumnDef="Chart">
          <th mat-header-cell *matHeaderCellDef> Chart</th>
          <td mat-cell *matCellDef="let element">
            <button mat-icon-button  [routerLink]="['/view',element.id]"
              aria-label="Example icon-button with a menu">
              <mat-icon>visibility</mat-icon>
            </button>
           
            
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
      </ng-container>
    </div>
  </div>
</div>
